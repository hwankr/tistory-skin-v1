@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    body {
        @apply antialiased text-slate-800 bg-white dark:bg-gray-900 dark:text-slate-100;
    }
}

@layer components {
    .prose code {
        @apply bg-slate-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm text-pink-500 font-mono font-medium;
    }

    /* Custom Scrollbar for TOC */
    .custom-scrollbar::-webkit-scrollbar {
        width: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        @apply bg-transparent;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        @apply bg-gray-200 dark:bg-gray-700 rounded;
    }

    /* Force Dark Mode Typography Contrast */
    /* Force Dark Mode Typography Contrast */
    .dark .prose {
        color: #cbd5e1 !important;
        /* Fallback */
    }

    .dark .prose p,
    .dark .prose ul,
    .dark .prose ol,
    .dark .prose li,
    .dark .prose blockquote {
        color: #cbd5e1 !important;
        /* slate-300 */
    }

    .dark .prose h1,
    .dark .prose h2,
    .dark .prose h3,
    .dark .prose h4,
    .dark .prose strong,
    .dark .prose b {
        color: #f1f5f9 !important;
        /* slate-100 */
    }

    .dark .prose a {
        color: #38bdf8 !important;
        /* sky-400 */
    }

    /* Code Block Styling (Mac Style) */
    .prose pre {
        @apply rounded-xl bg-[#2d2d2d] dark:bg-[#1e1e1e] border border-gray-200 dark:border-gray-700 shadow-sm relative pt-10 !important;
    }

    .prose pre::before {
        content: "";
        position: absolute;
        top: 14px;
        left: 16px;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: #ff5f56;
        box-shadow: 20px 0 0 #ffbd2e, 40px 0 0 #27c93f;
        z-index: 10;
    }

    .prose code {
        @apply font-mono text-sm;
    }

    /* Inline Code Styling (Base) */
    .prose code {
        @apply px-1.5 py-0.5 rounded bg-slate-100 dark:bg-gray-800 text-pink-500 dark:text-pink-400 font-medium;
    }

    /* Map Underline (Ctrl+U) to Inline Code Style */
    .prose u {
        @apply px-1.5 py-0.5 rounded bg-slate-100 dark:bg-gray-800 text-brand-600 dark:text-brand-400 font-medium no-underline;
    }

    /* Code Block Styling (Clean Mac Dark Style) - Overrides Base Code Style */
    .prose pre {
        @apply rounded-xl bg-[#1e1e1e] dark:bg-[#1e1e1e] shadow-xl relative pt-12 pb-6 px-6 overflow-hidden !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
        font-family: 'JetBrains Mono', 'D2Coding', monospace !important;
    }

    /* Mac Window Controls (Traffic Lights) */
    .prose pre::before {
        content: "";
        position: absolute;
        top: 18px;
        left: 20px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: #ff5f56;
        box-shadow: 20px 0 0 #ffbd2e, 40px 0 0 #27c93f;
        opacity: 1;
    }

    /* Reset Code inside Pre (Block) to prevent double styling */
    .prose pre code {
        background-color: transparent !important;
        color: #d4d4d4 !important;
        padding: 0 !important;
        border-radius: 0 !important;
        font-weight: normal !important;
        font-family: inherit !important;
        font-size: 0.9em !important;
        line-height: 1.7 !important;
        text-shadow: none !important;
        box-shadow: none !important;
        /* Ensure no shadow from inline style */
    }